{"ast":null,"code":"/**\n * Utility module to work with Arrays.\n *\n * @module array\n */\n\nimport * as set from './set.js';\n\n/**\n * Return the last element of an array. The element must exist\n *\n * @template L\n * @param {ArrayLike<L>} arr\n * @return {L}\n */\nexport const last = arr => arr[arr.length - 1];\n\n/**\n * @template C\n * @return {Array<C>}\n */\nexport const create = () => (/** @type {Array<C>} */[]);\n\n/**\n * @template D\n * @param {Array<D>} a\n * @return {Array<D>}\n */\nexport const copy = a => (/** @type {Array<D>} */a.slice());\n\n/**\n * Append elements from src to dest\n *\n * @template M\n * @param {Array<M>} dest\n * @param {Array<M>} src\n */\nexport const appendTo = (dest, src) => {\n  for (let i = 0; i < src.length; i++) {\n    dest.push(src[i]);\n  }\n};\n\n/**\n * Transforms something array-like to an actual Array.\n *\n * @function\n * @template T\n * @param {ArrayLike<T>|Iterable<T>} arraylike\n * @return {T}\n */\nexport const from = Array.from;\n\n/**\n * True iff condition holds on every element in the Array.\n *\n * @function\n * @template {ArrayLike<any>} ARR\n *\n * @param {ARR} arr\n * @param {ARR extends ArrayLike<infer S> ? ((value:S, index:number, arr:ARR) => boolean) : any} f\n * @return {boolean}\n */\nexport const every = (arr, f) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (!f(arr[i], i, arr)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * True iff condition holds on some element in the Array.\n *\n * @function\n * @template {ArrayLike<any>} ARR\n *\n * @param {ARR} arr\n * @param {ARR extends ArrayLike<infer S> ? ((value:S, index:number, arr:ARR) => boolean) : never} f\n * @return {boolean}\n */\nexport const some = (arr, f) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (f(arr[i], i, arr)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * @template ELEM\n *\n * @param {ArrayLike<ELEM>} a\n * @param {ArrayLike<ELEM>} b\n * @return {boolean}\n */\nexport const equalFlat = (a, b) => a.length === b.length && every(a, (item, index) => item === b[index]);\n\n/**\n * @template ELEM\n * @param {Array<Array<ELEM>>} arr\n * @return {Array<ELEM>}\n */\nexport const flatten = arr => fold(arr, /** @type {Array<ELEM>} */[], (acc, val) => acc.concat(val));\n\n/**\n * @template T\n * @param {number} len\n * @param {function(number, Array<T>):T} f\n * @return {Array<T>}\n */\nexport const unfold = (len, f) => {\n  const array = new Array(len);\n  for (let i = 0; i < len; i++) {\n    array[i] = f(i, array);\n  }\n  return array;\n};\n\n/**\n * @template T\n * @template RESULT\n * @param {Array<T>} arr\n * @param {RESULT} seed\n * @param {function(RESULT, T, number):RESULT} folder\n */\nexport const fold = (arr, seed, folder) => arr.reduce(folder, seed);\nexport const isArray = Array.isArray;\n\n/**\n * @template T\n * @param {Array<T>} arr\n * @return {Array<T>}\n */\nexport const unique = arr => from(set.from(arr));\n\n/**\n * @template T\n * @template M\n * @param {ArrayLike<T>} arr\n * @param {function(T):M} mapper\n * @return {Array<T>}\n */\nexport const uniqueBy = (arr, mapper) => {\n  /**\n   * @type {Set<M>}\n   */\n  const happened = set.create();\n  /**\n   * @type {Array<T>}\n   */\n  const result = [];\n  for (let i = 0; i < arr.length; i++) {\n    const el = arr[i];\n    const mapped = mapper(el);\n    if (!happened.has(mapped)) {\n      happened.add(mapped);\n      result.push(el);\n    }\n  }\n  return result;\n};\n\n/**\n * @template {ArrayLike<any>} ARR\n * @template {function(ARR extends ArrayLike<infer T> ? T : never, number, ARR):any} MAPPER\n * @param {ARR} arr\n * @param {MAPPER} mapper\n * @return {Array<MAPPER extends function(...any): infer M ? M : never>}\n */\nexport const map = (arr, mapper) => {\n  /**\n   * @type {Array<any>}\n   */\n  const res = Array(arr.length);\n  for (let i = 0; i < arr.length; i++) {\n    res[i] = mapper(/** @type {any} */arr[i], i, /** @type {any} */arr);\n  }\n  return /** @type {any} */res;\n};\n\n/**\n * This function bubble-sorts a single item to the correct position. The sort happens in-place and\n * might be useful to ensure that a single item is at the correct position in an otherwise sorted\n * array.\n *\n * @example\n *  const arr = [3, 2, 5]\n *  arr.sort((a, b) => a - b)\n *  arr // => [2, 3, 5]\n *  arr.splice(1, 0, 7)\n *  array.bubbleSortItem(arr, 1, (a, b) => a - b)\n *  arr // => [2, 3, 5, 7]\n *\n * @template T\n * @param {Array<T>} arr\n * @param {number} i\n * @param {(a:T,b:T) => number} compareFn\n */\nexport const bubblesortItem = (arr, i, compareFn) => {\n  const n = arr[i];\n  let j = i;\n  // try to sort to the right\n  while (j + 1 < arr.length && compareFn(n, arr[j + 1]) > 0) {\n    arr[j] = arr[j + 1];\n    arr[++j] = n;\n  }\n  if (i === j && j > 0) {\n    // no change yet\n    // sort to the left\n    while (j > 0 && compareFn(arr[j - 1], n) > 0) {\n      arr[j] = arr[j - 1];\n      arr[--j] = n;\n    }\n  }\n  return j;\n};","map":{"version":3,"names":["set","last","arr","length","create","copy","a","slice","appendTo","dest","src","i","push","from","Array","every","f","some","equalFlat","b","item","index","flatten","fold","acc","val","concat","unfold","len","array","seed","folder","reduce","isArray","unique","uniqueBy","mapper","happened","result","el","mapped","has","add","map","res","bubblesortItem","compareFn","n","j"],"sources":["/Users/dheerajkumar/Desktop/Collaborative_Editor/client/node_modules/lib0/array.js"],"sourcesContent":["/**\n * Utility module to work with Arrays.\n *\n * @module array\n */\n\nimport * as set from './set.js'\n\n/**\n * Return the last element of an array. The element must exist\n *\n * @template L\n * @param {ArrayLike<L>} arr\n * @return {L}\n */\nexport const last = arr => arr[arr.length - 1]\n\n/**\n * @template C\n * @return {Array<C>}\n */\nexport const create = () => /** @type {Array<C>} */ ([])\n\n/**\n * @template D\n * @param {Array<D>} a\n * @return {Array<D>}\n */\nexport const copy = a => /** @type {Array<D>} */ (a.slice())\n\n/**\n * Append elements from src to dest\n *\n * @template M\n * @param {Array<M>} dest\n * @param {Array<M>} src\n */\nexport const appendTo = (dest, src) => {\n  for (let i = 0; i < src.length; i++) {\n    dest.push(src[i])\n  }\n}\n\n/**\n * Transforms something array-like to an actual Array.\n *\n * @function\n * @template T\n * @param {ArrayLike<T>|Iterable<T>} arraylike\n * @return {T}\n */\nexport const from = Array.from\n\n/**\n * True iff condition holds on every element in the Array.\n *\n * @function\n * @template {ArrayLike<any>} ARR\n *\n * @param {ARR} arr\n * @param {ARR extends ArrayLike<infer S> ? ((value:S, index:number, arr:ARR) => boolean) : any} f\n * @return {boolean}\n */\nexport const every = (arr, f) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (!f(arr[i], i, arr)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * True iff condition holds on some element in the Array.\n *\n * @function\n * @template {ArrayLike<any>} ARR\n *\n * @param {ARR} arr\n * @param {ARR extends ArrayLike<infer S> ? ((value:S, index:number, arr:ARR) => boolean) : never} f\n * @return {boolean}\n */\nexport const some = (arr, f) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (f(arr[i], i, arr)) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * @template ELEM\n *\n * @param {ArrayLike<ELEM>} a\n * @param {ArrayLike<ELEM>} b\n * @return {boolean}\n */\nexport const equalFlat = (a, b) => a.length === b.length && every(a, (item, index) => item === b[index])\n\n/**\n * @template ELEM\n * @param {Array<Array<ELEM>>} arr\n * @return {Array<ELEM>}\n */\nexport const flatten = arr => fold(arr, /** @type {Array<ELEM>} */ ([]), (acc, val) => acc.concat(val))\n\n/**\n * @template T\n * @param {number} len\n * @param {function(number, Array<T>):T} f\n * @return {Array<T>}\n */\nexport const unfold = (len, f) => {\n  const array = new Array(len)\n  for (let i = 0; i < len; i++) {\n    array[i] = f(i, array)\n  }\n  return array\n}\n\n/**\n * @template T\n * @template RESULT\n * @param {Array<T>} arr\n * @param {RESULT} seed\n * @param {function(RESULT, T, number):RESULT} folder\n */\nexport const fold = (arr, seed, folder) => arr.reduce(folder, seed)\n\nexport const isArray = Array.isArray\n\n/**\n * @template T\n * @param {Array<T>} arr\n * @return {Array<T>}\n */\nexport const unique = arr => from(set.from(arr))\n\n/**\n * @template T\n * @template M\n * @param {ArrayLike<T>} arr\n * @param {function(T):M} mapper\n * @return {Array<T>}\n */\nexport const uniqueBy = (arr, mapper) => {\n  /**\n   * @type {Set<M>}\n   */\n  const happened = set.create()\n  /**\n   * @type {Array<T>}\n   */\n  const result = []\n  for (let i = 0; i < arr.length; i++) {\n    const el = arr[i]\n    const mapped = mapper(el)\n    if (!happened.has(mapped)) {\n      happened.add(mapped)\n      result.push(el)\n    }\n  }\n  return result\n}\n\n/**\n * @template {ArrayLike<any>} ARR\n * @template {function(ARR extends ArrayLike<infer T> ? T : never, number, ARR):any} MAPPER\n * @param {ARR} arr\n * @param {MAPPER} mapper\n * @return {Array<MAPPER extends function(...any): infer M ? M : never>}\n */\nexport const map = (arr, mapper) => {\n  /**\n   * @type {Array<any>}\n   */\n  const res = Array(arr.length)\n  for (let i = 0; i < arr.length; i++) {\n    res[i] = mapper(/** @type {any} */ (arr[i]), i, /** @type {any} */ (arr))\n  }\n  return /** @type {any} */ (res)\n}\n\n/**\n * This function bubble-sorts a single item to the correct position. The sort happens in-place and\n * might be useful to ensure that a single item is at the correct position in an otherwise sorted\n * array.\n *\n * @example\n *  const arr = [3, 2, 5]\n *  arr.sort((a, b) => a - b)\n *  arr // => [2, 3, 5]\n *  arr.splice(1, 0, 7)\n *  array.bubbleSortItem(arr, 1, (a, b) => a - b)\n *  arr // => [2, 3, 5, 7]\n *\n * @template T\n * @param {Array<T>} arr\n * @param {number} i\n * @param {(a:T,b:T) => number} compareFn\n */\nexport const bubblesortItem = (arr, i, compareFn) => {\n  const n = arr[i]\n  let j = i\n  // try to sort to the right\n  while (j + 1 < arr.length && compareFn(n, arr[j + 1]) > 0) {\n    arr[j] = arr[j + 1]\n    arr[++j] = n\n  }\n  if (i === j && j > 0) { // no change yet\n    // sort to the left\n    while (j > 0 && compareFn(arr[j - 1], n) > 0) {\n      arr[j] = arr[j - 1]\n      arr[--j] = n\n    }\n  }\n  return j\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}